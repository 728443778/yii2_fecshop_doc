产品库存
==========

> 指的是产品的库存


### 1.产品库存类型

产品的类型分为两种，一种京东模式，一种淘宝模式，详情可以参看
：[fecshop产品](fecshop_product.md)

#### 京东模式

使用的是产品的qty字段，在后台编辑对应，如图：

![jd](images/a211.png)

#### 淘宝模式

对应的是custom_option（自定义属性）部分的产品库存，在淘宝模式中，
产品的库存值（指的是上面截图的库存选项）将会被忽略，下面图中设置的库存
为有效库存。


![tb](images/a222.png)

对于淘宝和京东模式，库存方面只能二选一。

### 2.库存存储

产品表是mongodb表，产品库存已经从mongodb中抽出来，放到mysql中
，因为产品库存操作具有多表事务性。
mongodb里面也会存储一个qty字段，但是这个存储的值无效，在
产品初始化的时候会使用mysql中的值覆盖掉。
库存在mysql中存储对应的表为：

淘宝模式库存：`product_custom_option_qty`

京东模式库存：`product_flat_qty`



